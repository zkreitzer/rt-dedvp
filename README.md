# ASOC FPGA Development for MCP Delay Line Anode Characterization

This repository supports FPGA-centric development and design work for the ASOC (Application-Specific Optical Circuit) ASIC, a waveform digitizer system-on-chip used to measure high-rate, small-amplitude signals from microchannel plates (MCPs). The primary experimental application is the characterization of delay line anodes using these MCP signals.

The work is a collaborative electrical engineering design project between Virginia Tech and Southwest Research Institute (SwRI).

## Technical Background

### ASOC ASIC

The ASOC ASIC is a high-performance waveform digitizer designed for applications where many small, fast pulses must be captured and analyzed. In this project, ASOC is used to digitize signals generated by MCP detectors that are read out with delay line anodes.

The PDF in `docs/Measurement_results_for_the_ASoC_V3_A_High_Performance_Waveform_Digitizer_System-on-Chip.pdf` provides detailed measurement results and performance characterization for the ASOC V3 device. It serves as a key technical reference for understanding the capabilities and limitations of the ASIC that the FPGA design must support.

### Microchannel Plates (MCPs)

Microchannel plates are electron multipliers commonly used for detecting photons or charged particles with high temporal and spatial resolution. Incident particles produce electrons that cascade through microscopic channels, yielding fast, low-amplitude output pulses.

For this project, the ASOC ASIC and associated FPGA logic are intended to capture these MCP output pulses at high rates while preserving timing information that is critical for position and timing reconstruction.

### Delay Line Anodes

Delay line anodes are position-sensitive readout structures in which signals from an MCP are coupled into transmission lines with well-defined propagation delays. By measuring the relative arrival times and amplitudes of signals at multiple taps, one can reconstruct where on the detector surface an event occurred.

The FPGA logic developed in this repository is ultimately aimed at enabling or supporting:

- High-rate acquisition of ASOC digitized waveforms
- Extraction of timing and amplitude parameters from those waveforms
- Data framing suitable for downstream delay line anode reconstruction and analysis

(At present, only documentation is checked into this repository; the FPGA/HDL implementation described above is planned but not yet included.)

## Project Scope

The technical scope of this repository is centered on:

- Supporting FPGA-based readout and control of the ASOC ASIC
- Enabling high-rate, small-amplitude signal acquisition from MCPs
- Providing data interfaces and formats suitable for delay line anode characterization
- Serving as a shared technical space for Virginia Tech and SwRI collaborators working on ASOC-based MCP readout

As of the current state of the repository, the primary contents are documentation files that describe the hardware platform and ASOC performance. HDL sources, FPGA project files, simulation testbenches, and software utilities are expected future additions but are **not yet present**.

## Repository Structure

Current top-level layout:

- `README.md` – This file, providing an overview of the project and repository.
- `docs/` – Documentation related to the ASOC ASIC and FPGA prototyping hardware and experiments:
  - `Measurement_results_for_the_ASoC_V3_A_High_Performance_Waveform_Digitizer_System-on-Chip.pdf` – Measurement and characterization report for the ASOC V3 waveform digitizer system-on-chip.
  - `a3pe_proto_kit_ug.pdf` – User guide for an A3PE (ProASIC3E) prototype kit, describing the FPGA prototyping platform and its usage.
  - `docs/hardware/` – Example/template hardware documentation for boards, schematics, and vendor materials.
  - `docs/fpga/` – Example/template documentation for FPGA/ASOC design specifications and interfaces.
  - `docs/experiments/` – Example/template documentation for calibration procedures and MCP delay line anode experiments.
- `fpga/` – FPGA design tree containing example/template HDL, constraints, simulation testbenches, and an A3PE prototype kit project scaffold.
- `firmware/` – Example/template embedded firmware sources and platform stubs for ASOC/FPGA configuration and control.
- `software/` – Example/template host-side tools for data acquisition and analysis.
- `external/nalu/` – Integration point for NALU-provided software repositories, currently containing only a placeholder README.

Aside from the two PDF documents in `docs/` and this top-level README, all code-like files currently present (under `fpga/`, `firmware/`, `software/`, and `docs/*` subdirectories) are **examples/templates only** and must be replaced or extended with actual implementation code or documents.

## Planned Repository Structure

The directory layout described in this section has now been created in the repository with example/template files. The descriptions below define the intended long-term roles of each directory as real ASOC FPGA designs, firmware, and analysis tools are added.

### `fpga/` – HDL, Constraints, Simulation, and Projects

Intended to hold all FPGA-design-related artifacts for interfaces to the ASOC ASIC and MCP/delay line anode readout.

- `fpga/src/` – HDL source modules implementing ASOC interfaces, data acquisition pipelines, buffering, and control logic.
  - **File types:** Verilog/SystemVerilog/VHDL source (e.g., `.v`, `.sv`, `.vh`, `.vhd`, `.vhdl`).
  - **Workflow role:** Primary design source used for synthesis, place-and-route, and simulation.
- `fpga/constr/` – FPGA constraint files capturing timing requirements, pin assignments, clock definitions, and I/O standards.
  - **File types:** Vendor-specific constraint formats (e.g., `.sdc`, `.pdc`, board pinout files) appropriate for the A3PE/ProASIC3E toolchain.
  - **Workflow role:** Consumed by the FPGA tools to ensure that ASOC signal timing, MCP input routing, and board-level interfaces meet requirements.
- `fpga/sim/` – Simulation testbenches and verification environments.
  - **File types:** Testbench HDL, behavioral models for ASOC/MCP/delay line anodes, stimulus generators, simulation configuration files, and scripts (e.g., `.v`, `.sv`, `.vhd`, `.do`, `.tcl`).
  - **Workflow role:** Used to functionally verify ASOC interfaces, readout timing, and data framing prior to programming hardware.
- `fpga/projects/a3pe_proto_kit/` – Vendor-specific project files targeting the A3PE (ProASIC3E) prototype kit described in `docs/a3pe_proto_kit_ug.pdf`.
  - **File types:** FPGA project databases and configuration files created by the vendor's design environment (e.g., project descriptors, constraint assignments, implementation run configurations).
  - **Workflow role:** Encapsulates the build configuration for the prototype board, linking `src/`, `constr/`, and `sim/` into a loadable bitstream.

### `firmware/` – Embedded Control and ASOC Configuration

Intended to hold firmware and embedded software used to configure and control the ASOC ASIC and associated FPGA logic, if an embedded controller or soft CPU is used.

- `firmware/src/` – Firmware source code for ASOC configuration and run control.
  - **File types:** C/C++ or other embedded language sources and headers (e.g., `.c`, `.cpp`, `.h`, linker scripts, startup code).
  - **Workflow role:** Implements register writes, configuration sequences, and runtime control interfaces to the FPGA/ASOC system.
- `firmware/platform/` – Board- or platform-specific support code.
  - **File types:** Board support packages, low-level drivers, and hardware abstraction layers.
  - **Workflow role:** Adapts the generic firmware to specific controller boards or soft-core CPU platforms used in the ASOC system.

### `software/` – Host-Side Data Acquisition and Analysis

Intended to hold host-side tools that interact with the FPGA/ASOC hardware for data acquisition and offline analysis.

- `software/daq/` – Command-line or graphical tools for configuring runs and capturing waveform data.
  - **File types:** Scripts and applications (e.g., Python, C/C++, MATLAB) for issuing commands to the hardware, logging data streams, and managing runs.
  - **Workflow role:** Provides the operator-facing interface to start/stop acquisitions and archive raw data from MCP delay line anode experiments.
- `software/analysis/` – Post-processing and analysis utilities.
  - **File types:** Analysis scripts, notebooks, and libraries (e.g., Python or MATLAB) that implement waveform processing, timing extraction, and delay line position reconstruction.
  - **Workflow role:** Used to convert raw ASOC waveform data into calibrated timing/position information and performance metrics.

### `docs/` Extensions – Design and Calibration Documentation

The `docs/` directory now contains the two core hardware PDFs listed above, plus example/template Markdown documents in the following subdirectories:

- `docs/hardware/` – Example/template board-level manuals, schematics, and vendor documentation (including the existing A3PE prototype kit user guide once reorganized).
- `docs/fpga/` – Example/template design specifications, interface definitions, and timing diagrams for the FPGA/ASOC implementation.
- `docs/experiments/` – Example/template calibration procedures, measurement setups, and experiment-specific notes for MCP delay line anode characterization.

These subdirectories currently contain only placeholder/example content and should be replaced or extended with detailed, experiment-specific documentation as the project matures.


## Collaboration: Virginia Tech and SwRI

This project is a joint effort between:

- **Virginia Tech** – Contributing expertise in detector physics, MCP/delay line anode systems, and experimental characterization.
- **Southwest Research Institute (SwRI)** – Contributing expertise in digital design, ASIC/FPGA integration, and embedded system development.

The repository is intended as a shared technical artifact, capturing documentation and, in future, FPGA design assets used to integrate the ASOC ASIC into experimental setups for MCP delay line anode characterization.

Coordination, project planning, and detailed task tracking are handled within the collaborating institutions; this repository focuses on shared technical artifacts rather than project management.

## Build and Setup Instructions

**Important:** At this time there are no FPGA project files, HDL sources, or software utilities in the repository, and therefore there are **no build or setup steps** that can be executed directly from this codebase.

When FPGA and ASIC support files are added, this section is intended to document, at minimum:

- Required FPGA toolchain(s) and versions (e.g., the specific vendor tools used with the A3PE prototype kit)
- Project directory layout for HDL, constraints, and simulation
- Steps to synthesize, implement, and program the target FPGA
- Any companion software or scripts required for ASOC configuration and data readout

Until those artifacts are present, this repository should be treated as a documentation archive and planning space.

## Contributing

Because this repository supports an ongoing research collaboration between Virginia Tech and SwRI, contributions are primarily expected from team members at these institutions.

If you are part of the project team:

- Coordinate with the designated project leads at your institution before introducing new subdirectories (e.g., `fpga/`, `asic/`, `software/`).
- Use descriptive commit messages and keep related changes grouped logically (for example, ASIC register-map updates together with corresponding FPGA interface changes, once those files exist).
- When FPGA/HDL content is added, follow any coding standards, directory conventions, or review processes established by the team (to be documented here as they are formalized).

If you are external to the collaboration and interested in this work, please contact the project team at Virginia Tech or SwRI through their official channels before proposing changes.

## Future Directions

As the project evolves, this repository is expected to grow to include:

- FPGA HDL and constraint files implementing interfaces to the ASOC ASIC
- Simulation environments for validating timing, throughput, and data integrity
- Data acquisition and analysis utilities for MCP delay line anode experiments
- Additional documentation capturing experimental setups, calibration procedures, and performance results

These elements will be documented here as they are added. For now, the `docs/` folder and this README provide the authoritative, up-to-date description of the repository contents and intended technical direction.
